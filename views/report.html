<!DOCTYPE html>
<html>
	<head>
		<link href='http://fonts.googleapis.com/css?family=Josefin+Sans' rel='stylesheet' type='text/css'>
		<link href='public/styles/muleStyle.css' rel='stylesheet'type='text/css'>

		<script src="../config.js"></script>
		<script src="../graph.js"></script>
		<script>
			var jobName = getQueryVariable('jobName');
			var allBuildIds = [];
			var chosenID = -1;
			var mouseIsDown;
			var holdPosition= 0;
			var optionalID = getQueryVariable('id');
			if(optionalID == 'UNDEFINED')
				optionalID = 0;
			var prevID, baseID;
			var onCanvas =[0,0,0];
			var options = [];

			var testObject = getItems(jobName);
			var cache = {};

			var prevCache = {
						'duration': '',

				        'cpu use': [],
				        'cpu iowait': [],
				        'cpu steal': [],

			 		    'mem use': [],
			 		    'mem kbcache': [],
			 		    'mem kbbuffers': [],
			         
			  			'disk util': [],
			  	        'disk await': [],
			  		    'disk tps': [],
			  			'disk rd_sec': [],
			  			'disk wr_sec': [],
			  		  
			  		  	'network used': [],
			  			'network txkB': [],
			  			'network rxkB': [],
			  		  
			            'paging pgpgin': [],
			            'paging pgpgout': [],
			            'paging fault': [],
			            'paging majflt': [],
			            'paging pgpgin': [],
			            'paging pgfree': [],
			            'paging pgscank': [],
			            'paging pgscand': [],
			            'paging pgsteal': [],
			            'paging vmef': [],
			  		  
			  			'swap in': [],
			  			'swap out': []
			};
			var baseCache = {
						'duration': '',

				        'cpu use': [],
				        'cpu iowait': [],
				        'cpu steal': [],

			 		    'mem use': [],
			 		    'mem kbcache': [],
			 		    'mem kbbuffers': [],
			         
			  			'disk util': [],
			  	        'disk await': [],
			  		    'disk tps': [],
			  			'disk rd_sec': [],
			  			'disk wr_sec': [],
			  		  
			  		  	'network used': [],
			  			'network txkB': [],
			  			'network rxkB': [],
			  		  
			            'paging pgpgin': [],
			            'paging pgpgout': [],
			            'paging fault': [],
			            'paging majflt': [],
			            'paging pgpgin': [],
			            'paging pgfree': [],
			            'paging pgscank': [],
			            'paging pgscand': [],
			            'paging pgsteal': [],
			            'paging vmef': [],
			  		  
			  			'swap in': [],
			  			'swap out': []
			};

			var testOptions = {
										 'cpu use ':'CPU: Used',
										 'cpu iowait ':'CPU: IO Wait',
										 'cpu steal ':'CPU: Steal',

										 'mem use ':'Memory: Used',
							 		     'mem kbcache ':'Memory: KB Cache',
										 'mem kbbuffers ':'Memory: KB Buffers',
							         							  	      
										 'disk util ':'Disk: Used',
										 'disk await ':'Disk: Await',
										 'disk tps ':'Disk: TPS',
										 'disk rd_sec ':'Disk: RD_Sec',
										 'disk wr_sec ':'Disk: WR_Sec',
							  		  
										 'network used ':'Network: Used',
							  			 'network txkB ': 'Network: TxkB',
										 'network rxkB ':'Network: RxkB',
							  		  
										 'paging pgpgin ':'Paging: Pgpgin',
										 'paging pgpgout ':'Paging: Pgpgout',
										 'paging fault ':'Paging: Fault',
										 'paging majflt ':	'Paging: Maj. Fault',
										 'paging pgfree ':'Paging: PG Free',
										 'paging pgscank ':'Paging: PG Scank',
										 'paging pgscand ':'Paging: PG Scand',
										 'paging pgsteal ':'Paging: PG Steal',
										 'paging vmef ':'Paging: VMEF',
							  		  
										 'swap in ':'Swap: In',
										 'swap out ':'Swap: Out'
			}

			var mouseDown = 0;
			


			var avgCPU, avgDisk, avgMem, avgTPS, avgNet, avgGCStall, avgHeap, avgRespT;
			var compCPU, compDisk, compMem, compTPS, compNet, compGCStall, compHeap, compRespT;
			function showHide(index){
				var divToChange;
				if(index == 0){
					divToChange = document.getElementById('slaResults');
				}
				else if(index == 1){
					divToChange = document.getElementById('prevResults');			
				}
				else if(index == 2){
					divToChange = document.getElementById('baseResults');
				}

				if(divToChange.style.display == 'none' || divToChange.style.display == ''){
					divToChange.style.display = 'block';
					document.getElementById('plus'+index).innerHTML = '-';
				}
				else{
					divToChange.style.display = 'none';
					document.getElementById('plus'+index).innerHTML = '+';
				}
			}
			function getQueryVariable(variable) {
			    var query = window.location.search.substring(1);
			    var vars = query.split('&');
			    for (var i = 0; i < vars.length; i++) {
			        var pair = vars[i].split('=');
			        if (decodeURIComponent(pair[0]) == variable) {
			            return decodeURIComponent(pair[1]);
			        }
			    }
			    return 'UNDEFINED';
			}
			
			function getRequest(url){
				var request = new XMLHttpRequest();
				request.open("GET", url, false);
				request.send(null);
				return request.responseText;
			}

			function getBuilds(path){
				if(allBuildIds.length == 0){
					var str = getRequest(path);				
					var results = str.split(',');
					results.pop();
					allBuildIds = results;
					return results;
				}
				else{
					return allBuildIds;
				}
			}

			function buildDropDown(dropDownName){
				var buildIds = getBuilds(config.retrieveBuilds+ jobName);
				var dropDown = document.getElementById(dropDownName);
				if(optionalID == 0){
					for(var i=0; i < buildIds.length; i++){
						if(i == 0)
							dropDown.innerHTML += '<option value="'+i+'"selected="selected">'+buildIds[i]+'</option>';
						else
							dropDown.innerHTML += '<option>'+buildIds[i]+'</option>';
					}
				}
				else{
					for(var i=0; i < buildIds.length; i++){
						if(buildIds[i] == optionalID)
							dropDown.innerHTML += '<option value="'+i+'"selected="selected">'+buildIds[i]+'</option>';
						else
							dropDown.innerHTML += '<option>'+buildIds[i]+'</option>';
					}
				}
			}

			function getData(idNum){
				var job = jobName;								
				var url = config.getParsedData + jobName + '&id=' + idNum
					
				var str = getRequest(url);
				
				var data = JSON.parse(str);
				return data;			
			}


			//tps, responsetime, failed requests, error rate
			//cpu, memory, disk use, net use
			function fillCache(){
				cache = getData(chosenID);
/*
				options = [{
					'description': ['Current CPU Graph'],
					'data':[cache['cpu use']],
					'baseline': null,
					'percentage': true,
					'autosize': false,
					'setWidth': -1,
					'currX': 0
				 },
				 {
					'description': ['Current Memory Graph'],
					'data':[cache['mem use']],
					'baseline': null,
					'percentage': true,
					'autosize': false,
					'setWidth': -1,
					'currX': 0
				 },
				 {
					'description': ['Current Disk Graph'],
					'data':[cache['disk util']],
					'baseline': null,
					'percentage': true,
					'autosize': false,
					'setWidth': -1,
					'currX': 0
				 }];

				 for(var i=0; i < options.length; i++){
				 	var element = document.getElementById('graph'+(i+1));
				 	element.gIndex = i;
				 	element.addEventListener("mousewheel", zoom, false);
				 	element.addEventListener('mousemove', drag, false);
					element.addEventListener('mousedown', isDown, false);
					element.addEventListener('mouseup', isUp, false);
				 	
				 	
				 }*/
			}
			function redrawFrame(i, x){
				if(options[i].currX + x >= 0){
					options[i].currX += x;

					updateGraph('graph'+ (i+1), options[i]);
				} 
			}

			
			function drag(e){
				var evt= window.event || e //equalize event object
				evt.preventDefault();

				if(mouseIsDown){
					if(holdPosition <= e.pageX){
						redrawFrame(evt.target.gIndex,2);
						holdPosition = 	e.pageX;					
					}
					else{
						
						redrawFrame(evt.target.gIndex,-2);		
						holdPosition = 	e.pageX;			
					}
				}
				
			}
			function isDown(e){
				e.preventDefault();
				holdPosition = e.pageX;
				mouseIsDown = true;
			}
			function isUp(e){
				e.preventDefault();
				mouseIsDown = false;
			}

			function zoom(e){
				var evt = window.event || e //equalize event object
				var delta = evt.wheelDelta;
				if(delta< 0){
					zoomOut(evt.target.gIndex);
				}
				else{
					zoomIn(evt.target.gIndex);
				}

				if(evt.preventDefault){
					evt.preventDefault();
				}
				else
					return false;
			}

			function zoomIn(i){
				var change = options[i].setWidth * .005;
				if(options[i].setWidth >10)
					options[i].setWidth -= change;
				updateGraph('graph'+ (i+1), options[i]);
			}

			function zoomOut(i){
				var change = options[i].setWidth * .005;

				options[i].setWidth += change;
				updateGraph('graph'+ (i+1), options[i]);
			}
			function printMetric(nameOfP, name, value){
				var box = document.getElementById(nameOfP);
				if(name.indexOf('.com') >= 0){
					var type = name.substring(name.indexOf(':')+1, name.length);
					var server = 'Server '+ name.substring(13,14) + ' ' ;
					name = server +type;
					name = name.replace('_', ' ');
					box.innerHTML += name + ": <span id='"+ name +"' class='keyMetricResults'> "
									+ value +"</span><br>";
				}
				else{
					name = name.replace('_', ' ');
					box.innerHTML += name + ": <span id='"+ name +"' class='keyMetricResults'> "
									+ value +"</span><br>";
				}
			}
			function reloadGraph(){
				for(var i=0; i < options.length; i++){						
					updateGraph('graph'+(i+1), options[i]);
				}
			}
			
			function fillBox(nameOfP){
				var box = document.getElementById(nameOfP);
				
				if(nameOfP == 'summary'){
					var desiredResults = cache['SingularData']['Summary'];

					for(var prop in desiredResults){
						if(desiredResults.hasOwnProperty(prop)){	
							printMetric(nameOfP, prop, desiredResults[prop]);
						}
					}
				}
				else if(nameOfP == 'testMetrics'){
					box.innerHTML = '';
					var desiredResults = cache['SingularData']['Test_Results'];

					for(var prop in desiredResults){
						if(desiredResults.hasOwnProperty(prop)){	
							printMetric(nameOfP, prop, desiredResults[prop]);
						}
					}
				}
				else if(nameOfP == 'sysMetrics'){
					box.innerHTML = '';
					var desiredResults = cache['SingularData']['System_Resources'];

					for(var prop in desiredResults){
						if(desiredResults.hasOwnProperty(prop)){	
							printMetric(nameOfP, prop, desiredResults[prop]);
						}
					}

				}
				else if(nameOfP == 'jvmMetrics'){
					box.innerHTML = '';
					var desiredResults = cache['SingularData']['JVM'];

					for(var prop in desiredResults){
						if(desiredResults.hasOwnProperty(prop)){	
							printMetric(nameOfP, prop, desiredResults[prop]);
						}
					}

				}

			}
			
			function calculateCompAverages(type){
				
			}
			//Return object
			/*
				obj = {
						"metric": [jobResult, passed(true/false)]
				}

			*/
			function slaResults(){
				/*var slaObj = testObject.sla;

				var resultObj = {};
				resultObj['overall'] = true;
				for(var metric in slaObj){
					var metricName = metric.substring(0, metric.length-5);
					var min = parseFloat(slaObj[metric][0]);
					var max = parseFloat(slaObj[metric][1]);
					var jobResult;
					var type = metric.substring(metric.length-4, metric.length-1);

					var display = testOptions[metricName+' '] + ' (' +type.toUpperCase()+') --';
					if(type == 'avg'){
						jobResult = getAvg(cache[metricName]);						
					}
					else if(type == '90%'){
						jobResult = getPercentile(cache[metricName], 90);
					}
					else if(type == '99%'){
						jobResult = getPercentile(cache[metricName], 99);
					}
					if((jobResult+'').indexOf('.') >=0)
						var answer = (jobResult+'').substring(0, (jobResult+'').indexOf('.') + 3);
					else
						var answer = jobResult + '';

					if(min < jobResult && jobResult < max){
						resultObj[display] = [answer, true];
					}
					else{
						resultObj[display] = [answer, false];
						resultObj['overall'] = false;
					}

				}
				return resultObj;*/
			}
			function getItems(jobName){
				var url = config.getTestMetrics + jobName;
				var resp = getRequest(url);
				if(resp == '')
					resp = '{"sla":{},"prev":{},"base":{},"baseline":"-1"}';
				var value = JSON.parse(resp);
				baseID = value.baseline;
				return value;
			}
			
			function isEmpty(obj) {
			    for(var prop in obj) {
			        if(obj.hasOwnProperty(prop))
			            return false;
			    }

			    return true;
			}

			function fillPrevCache(){
				prevCache = getData(prevID);

			}

			function fillBaseCache(){
				baseCache = getData(baseID);
			}

			function resetGraphs(){
				/*
				options[0]['data'] = [cache['cpu use']];
				options[0]['description'] = ['Current CPU Graph'];
				options[1]['data'] = [cache['mem use']];
				options[1]['description'] = ['Current Memory Graph'];
				options[2]['data'] = [cache['disk util']];
				options[2]['description'] = ['Current Disk Graph'];

				for(var i=0; i < options.length; i++){						
					updateGraph('graph'+(i+1), options[i]);
				}
				resizeAllGraphs(options);*/
			}

			function addComparisonToGraphs(type){
				/*
				if(type =='prev'){
					options[0]['data'] = [cache['cpu use'], prevCache['cpu use']];
					options[0]['description'] = ['Current CPU Graph', 'Previous CPU Graph'];
					options[1]['data'] = [cache['mem use'], prevCache['mem use']];
					options[1]['description'] = ['Current Memory Graph', 'Previous Memory Graph'];
					options[2]['data'] = [cache['disk util'], prevCache['disk util']];
					options[2]['description'] = ['Current Disk Graph', 'Previous Disk Graph'];
					
					for(var i=0; i < options.length; i++){						
						updateGraph('graph'+(i+1), options[i]);
					}
				}
				else if(type == 'base'){
					options[0]['data'] = [cache['cpu use'], baseCache['cpu use']];
					options[0]['description'] = ['Current CPU Graph', 'Baseline CPU Graph'];
					options[1]['data'] = [cache['mem use'], baseCache['mem use']];
					options[1]['description'] = ['Current Memory Graph', 'Baseline Memory Graph'];
					options[2]['data'] = [cache['disk util'], baseCache['disk util']];
					options[2]['description'] = ['Current Disk Graph', 'Baseline Disk Graph'];
					
					for(var i=0; i < options.length; i++){						
						updateGraph('graph'+(i+1), options[i]);
					}
				}
				resizeAllGraphs(options);*/

			}

			function comparePrev(){
				/*
				if(document.getElementById('prevbutton').value == 'ON'){
					document.getElementById('prevbutton').value = 'OFF';
					document.getElementById('compCpu').innerHTML = ' ';
					document.getElementById('compDisk').innerHTML = ' ';
					document.getElementById('compMem').innerHTML = ' ';
					document.getElementById('compNet').innerHTML = ' ';
					document.getElementById('compTPS').innerHTML = ' ';

					resetGraphs();					
				}
				else{
					document.getElementById('basebutton').value = 'OFF';
					document.getElementById('prevbutton').value = 'ON';
					var dropDown = document.getElementById('prevNumber');
					prevID = dropDown.options[dropDown.selectedIndex].text;			

					fillPrevCache();

					calculateCompAverages('prev');				

					if(parseFloat(compCPU) < 0)
						document.getElementById('compCpu').className = 'greenText compareText';					
					else{
						compCPU = ' +' + compCPU;
						document.getElementById('compCpu').className = 'redText compareText';
					}
					if(parseFloat(compDisk) < 0)
						document.getElementById('compDisk').className = 'greenText compareText';					
					else{
						compDisk = ' +' + compDisk;
						document.getElementById('compDisk').className = 'redText compareText';
					}
					if(parseFloat(compMem) < 0)
						document.getElementById('compMem').className = 'greenText compareText';					
					else{
						compMem = ' +' + compMem;
						document.getElementById('compMem').className = 'redText compareText';
					}
					if(parseFloat(compNet) < 0)
						document.getElementById('compNet').className = 'greenText compareText';					
					else{
						compNet = ' +' + compNet;
						document.getElementById('compNet').className = 'redText compareText';
					}
					if(parseFloat(compTPS) < 0)
						document.getElementById('compTPS').className = 'greenText compareText';					
					else{
						compTPS = ' +' + compTPS;
						document.getElementById('compTPS').className = 'redText compareText';
					}
					document.getElementById('compCpu').innerHTML = ' '+compCPU+ ' %'; 
					document.getElementById('compDisk').innerHTML = ' '+compDisk+ ' %';
					document.getElementById('compMem').innerHTML = ' '+compMem+ ' %';
					document.getElementById('compNet').innerHTML = ' '+compNet+ ' %';
					document.getElementById('compTPS').innerHTML = ' '+compTPS;

					addComparisonToGraphs('prev');
					
				}*/
			}



			function compareBase(){/*
				if(document.getElementById('basebutton').value == 'ON'){
					document.getElementById('basebutton').value = 'OFF';
					document.getElementById('compCpu').innerHTML = ' ';
					document.getElementById('compDisk').innerHTML = ' ';
					document.getElementById('compMem').innerHTML = ' ';
					document.getElementById('compNet').innerHTML = ' ';
					document.getElementById('compTPS').innerHTML = ' ';

					resetGraphs();
				}
				else{
					document.getElementById('prevbutton').value = 'OFF';
					document.getElementById('basebutton').value = 'ON';
					
					baseID =  getItems(jobName).baseline;
					document.getElementById('baselineNumber').innerHTML = '' + baseID;
					if(baseID != '-1'){
						document.getElementById('baseVersion').style.color = "cyan";
						fillBaseCache();

						calculateCompAverages('base');				

						

						if(parseFloat(compCPU) < 0)
							document.getElementById('compCpu').className = 'greenText compareText';					
						else{
							compCPU = ' +' + compCPU;
							document.getElementById('compCpu').className = 'redText compareText';
						}
						if(parseFloat(compDisk) < 0)
							document.getElementById('compDisk').className = 'greenText compareText';					
						else{
							compDisk = ' +' + compDisk;
							document.getElementById('compDisk').className = 'redText compareText';
						}
						if(parseFloat(compMem) < 0)
							document.getElementById('compMem').className = 'greenText compareText';					
						else{
							compMem = ' +' + compMem;
							document.getElementById('compMem').className = 'redText compareText';
						}
						if(parseFloat(compNet) < 0)
							document.getElementById('compNet').className = 'greenText compareText';					
						else{
							compNet = ' +' + compNet;
							document.getElementById('compNet').className = 'redText compareText';
						}
						if(parseFloat(compTPS) < 0)
							document.getElementById('compTPS').className = 'greenText compareText';					
						else{
							compTPS = ' +' + compTPS;
							document.getElementById('compTPS').className = 'redText compareText';
						}
						document.getElementById('compCpu').innerHTML = ' '+compCPU+ ' %'; 
						document.getElementById('compDisk').innerHTML = ' '+compDisk+ ' %';
						document.getElementById('compMem').innerHTML = ' '+compMem+ ' %';
						document.getElementById('compNet').innerHTML = ' '+compNet+ ' %';
						document.getElementById('compTPS').innerHTML = ' '+compTPS;

						addComparisonToGraphs('base');

					}
					else{
						
						document.getElementById('baseVersion').style.color = "red";
						document.getElementById('baseVersion').innerHTML = 'ERROR: No Baseline Set';
					}
				}*/

			}
			//XXXX
			function fillPage(){

				fillBox('summary');
				fillBox('testMetrics');
				fillBox('sysMetrics');
				fillBox('jvmMetrics');

				/*
				document.getElementById('durationInsert').innerHTML = cache['duration'];
				document.getElementById('avgCpu').innerHTML = avgCPU+ ' %'; 
				document.getElementById('avgDisk').innerHTML = avgDisk+ ' %';
				document.getElementById('avgMem').innerHTML = avgMem+ ' %';
				document.getElementById('avgNet').innerHTML = avgNet+ ' %';
				document.getElementById('avgTPS').innerHTML = avgTPS;*/
				
				/*
				var sla = slaResults();

				if(isEmpty(testObject.sla) == true){
					document.getElementById('slaPass').innerHTML = 'Not Configured';
					document.getElementById('slaPass').className = 'grayText';
				}
				else if(sla['overall'] == false){
					document.getElementById('slaPass').innerHTML = 'Failed';
					document.getElementById('slaPass').className = 'redText';
				}
							

				var slaData = document.getElementById('slaDataResults');
				slaData.innerHTML = '';
				for(var metric in sla){
					if(metric != 'overall'){
						var colorOfResult = 'greenText';
						if(sla[metric][1] == false)
							colorOfResult = 'redText';
						slaData.innerHTML+= metric+ ' ';
						slaData.innerHTML+= '<span class=' + colorOfResult + '>' + sla[metric][0] + '</span>';
						slaData.innerHTML+='<br>';
					}
				}*/
				/*
					options = {
						    'description': 'nameOfLine1, nameOfLine2, nameOfLine3'
							'data': [[line1...],[line2...],[line3...]]
							'baseline': [line...]
							'percentage': true/false
							}

				*/
				
				/*for(var i=0; i < options.length; i++){
					updateGraph('graph'+(i+1), options[i]);
				}*/

			}

			function initializePage(){
				document.getElementById('jobTitle').innerHTML = jobName;
				buildDropDown('buildNumber');
				buildDropDown('prevNumber');
				updatePage();
				//window.addEventListener('resize', resizeAllGraphs(options), false);

				
			}

			function updatePage(){
				var dropDown = document.getElementById('buildNumber');
				var buildNumber = dropDown.options[dropDown.selectedIndex].text;
				chosenID = dropDown.options[dropDown.selectedIndex].text;
				testObject = getItems(jobName);
				document.getElementById('baselineNumber').innerHTML = '' + baseID;
				fillCache();
				var prevButton = document.getElementById("prevbutton");
				var baseButton = document.getElementById("basebutton");
				if(prevButton.value == 'ON')
					prevButton.click();
				if(baseButton.value == 'ON')
					baseButton.click();
				
				fillPage();
				//resizeAllGraphs(options);
			}
			function resizeAllGraphs(optionsArray){
				var x =window.innerWidth*.7,
				    y =window.innerHeight*.7;
				for(var line=0; line < optionsArray.length; line++){
					resizeCanvas('graph' + (line+1), x, y, optionsArray[line]);
				}
			}
			function resizeEasy(){
				resizeAllGraphs(options);
			}
			function setThisToBaseline(){
				var url = config.updateBaseline + jobName +'&id=' + chosenID;
				document.getElementById('baselineNumber').innerHTML = '' + chosenID;
				getRequest(url);
			}
		</script>
	</head>
	<body onresize="resizeEasy()">
		<div id= "pagewrapper">
			<div id="heading" class="mule">
				<img src="views/sources/mulesoft-logo.png" id="ml"alt="MuleLogo" width = '340px' height='120px'>

				<p id="logo"> Performance Analyzer</p>
			</div>
			<div id="menu" class="mule">
				<p id='menuHeading'><u><b>Menu</b></u></p><br>
				<p class = 'menuItems'> <a href="/">Home</a></p>
				<p class = 'menuItems'> <a href="/about">About</a></p>
			</div>
			<div id='content' >

				<div id='contentDisplay'>
					<p><b>Hudson Job:</b> <span id='jobTitle'></span></p>
					<div id='jobInfo' class='mule'>
						<p id='buildDropDownTitle'>Build:</p>
						<form id='buildDropDown'action="">
							<select id="buildNumber" onchange="updatePage()">
							</select>
						</form>
						<p id='summary'></p>
						
						<p id='setAsBase'>Set this run as the base line: <input type='button' value='YES' onclick='setThisToBaseline()'></p>

					</div>
				</div>
				<div id='keyMetrics'> <!--XXX-->
					<p>Key Metrics</p>
					<div id='testBox' class="infoMule">
						<p class='keyTitle'>Test Results</p>
						<p id='testMetrics'>
							
						</p>
						
					</div>
					<div id='systemBox'class="infoMule">
						<p class='keyTitle'>System Resources</p>
						<p id='sysMetrics'>
						</p>
						
					</div>
					<div id='jvmBox'class="infoMule">
						<p class='keyTitle'>JVM </p>
						<p id='jvmMetrics'>
							Avg CPU Use:  <span id='' class='keyMetricResults'>---</span><br>							
						</p>
						
					</div>
				</div>
				<p>Comparisons</p>
					
					<div id='compareBlock' class="mule">
						<div id='slaSection'>
							<p class='keyTitle' onclick="showHide(0)"><span id='plus0'>+</span> SLA Check: <span id='slaPass' class='greenText'> Passed</span></p>
							<div id='slaResults'>
								<p id='slaDataResults' class='dataResults'>									
								</p>
								
							</div>
						</div>
						<div id='prevSection'>
							<span id='prevTitle' class='keyTitle' onclick="showHide(1)"><span id='plus1'>+</span> Compared to previous run: </span>
							<form id='buildPrevDropDown'action="" >
								<select id="prevNumber" onchange="">
								</select>
								<input id='prevbutton' type='button' value='OFF' onclick='comparePrev()'>
							</form>
						</div>
						<div id='baseSection' >
							<span id='baseTitle' class='keyTitle' onclick="showHide(2)"><span id='plus2'>+</span> Compared to basline:  Run #<span id='baselineNumber'></span> &#47;&#47; Mule Version <span id='baseVersion'> 3.5.1 </span></span>
							<form>								
								<input id='basebutton' type='button' value='OFF' onclick='compareBase()'>
							</form>
						</div>
					</div>
				
				<div id='graphArea'>
						<p>Graph Plots</p>
					<div class='graphs'>
						<div class='graphContent'>
							CPU Graph<br>
							<canvas id='graph1' width='950' height='500' > 
							</canvas><br>
							Memory Graph<br>
							<canvas id='graph2' width='950' height='500' > 
							</canvas><br>
							Disk Graph<br>
							<canvas id='graph3' width='950' height='500' > 
							</canvas><br>
						</div>
					</div>
				</div>
			</div>

		</div>
		<script>
			initializePage();
		</script>
	</body>

</html>
